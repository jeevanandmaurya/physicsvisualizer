# PhysicsVisualizer - Feature-Based Architecture (Updated 2025)

## ğŸ“ Current Project Structure

```
physicsvisualizer/
â”œâ”€â”€ ğŸ“„ package.json & vite.config.js    # Build configuration
â”œâ”€â”€ ğŸ“„ README.md                        # Project documentation
â”œâ”€â”€ ğŸ—ï¸ PhysicsVisualizerArchitecture.md # System architecture docs
â”œâ”€â”€ ğŸ“ public/                          # Static assets
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ sw.js
â”‚   â””â”€â”€ vite.svg
â”œâ”€â”€ ğŸ“ src/                             # Source code (Feature-based)
â”‚   â”œâ”€â”€ ğŸ  App.jsx & main.jsx           # React app entry points
â”‚   â”œâ”€â”€ ğŸ¨ index.css                    # Global styles
â”‚   â”œâ”€â”€ ğŸ“Š scenes.js                    # Scene data & examples
â”‚   â”œâ”€â”€ ğŸ—‚ï¸ assets/                      # Static assets (images, fonts)
â”‚   â”‚   â”œâ”€â”€ physicsvisualizer.svg/png
â”‚   â”‚   â”œâ”€â”€ UbuntuMono fonts
â”‚   â”‚   â””â”€â”€ thumbnails/ (scene previews)
â”‚   â”œâ”€â”€ ğŸ”§ core/                        # Business logic & engines
â”‚   â”‚   â”œâ”€â”€ ğŸ¤– ai/                      # AI processing (Gemini)
â”‚   â”‚   â”‚   â”œâ”€â”€ gemini.js
â”‚   â”‚   â”‚   â””â”€â”€ prompts/ (agentPrompt.txt, extractPrompt.txt)
â”‚   â”‚   â”œâ”€â”€ âš›ï¸ physics/                 # Physics engines
â”‚   â”‚   â”‚   â”œâ”€â”€ engine.jsx              # Cannon.js integration
â”‚   â”‚   â”‚   â”œâ”€â”€ gravitation/calculations.js
â”‚   â”‚   â”‚   â”œâ”€â”€ electrostatic/calculations.js
â”‚   â”‚   â”‚   â”œâ”€â”€ fluid/calculations.js
â”‚   â”‚   â”‚   â”œâ”€â”€ constraints/calculations.js
â”‚   â”‚   â”‚   â””â”€â”€ connections/calculations.js
â”‚   â”‚   â””â”€â”€ ğŸ¬ scene/                   # Scene management
â”‚   â”‚       â”œâ”€â”€ history.js
â”‚   â”‚       â””â”€â”€ patcher.js
â”‚   â”œâ”€â”€ ğŸ¯ features/                    # Feature-based components
â”‚   â”‚   â”œâ”€â”€ ğŸ² visualizer/              # 3D visualization feature
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â”œâ”€â”€ Visualizer.jsx/css
â”‚   â”‚   â”‚       â”œâ”€â”€ OverlayGraph.jsx
â”‚   â”‚   â”‚       â””â”€â”€ SceneConsole.jsx/css
â”‚   â”‚   â”œâ”€â”€ ğŸ’¬ chat/                    # AI chat feature
â”‚   â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚   â”‚       â””â”€â”€ Conversation.jsx/css
â”‚   â”‚   â””â”€â”€ ğŸ“š collection/              # Scene management feature
â”‚   â”‚       â””â”€â”€ components/
â”‚   â”‚           â”œâ”€â”€ SceneSelector.jsx/css
â”‚   â”‚           â”œâ”€â”€ SceneDetails.jsx/css
â”‚   â”‚           â””â”€â”€ ChangePreview.jsx/css
â”‚   â”œâ”€â”€ ğŸ¨ shared/ui/                   # Reusable UI components
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ GlobalNav.jsx/css      # Navigation
â”‚   â”‚       â”œâ”€â”€ leftPanel.jsx/css      # Layout panels
â”‚   â”‚       â”œâ”€â”€ rightPanel.jsx/css     # Layout panels
â”‚   â”‚       â”œâ”€â”€ messagecontent.jsx     # Message display
â”‚   â”‚       â””â”€â”€ Graph.css              # Chart styling
â”‚   â”œâ”€â”€ ğŸ“„ pages/                       # Page-level components
â”‚   â”‚   â”œâ”€â”€ DashboardPage.jsx/css
â”‚   â”‚   â”œâ”€â”€ CollectionPage.jsx/css
â”‚   â”‚   â””â”€â”€ PhysicsVisualizerPage.jsx/css
â”‚   â”œâ”€â”€ âš™ï¸ contexts/                    # React contexts
â”‚   â”‚   â””â”€â”€ DatabaseContext.jsx
â”‚   â””â”€â”€ ğŸ› ï¸ utils/                       # Utility functions
â”‚       â””â”€â”€ ScenePatcher.js
â””â”€â”€ ğŸ“ backup/                          # Original components backup
    â””â”€â”€ components/ (all original files)
```

## ğŸŒ Application Flow

```
ğŸ“± DOM Root (index.html)
â””â”€â”€ ğŸ¯ React Root (main.jsx)
    â””â”€â”€ ğŸ”„ StrictMode
        â””â”€â”€ ğŸ§­ BrowserRouter (React Router)
            â””â”€â”€ ğŸ’¾ DatabaseProvider (Context)
                â””â”€â”€ ğŸ  App.jsx (Main App Component)
                    â”œâ”€â”€ ğŸ§­ GlobalNav (Navigation Bar)
                    â”‚   â”œâ”€â”€ ğŸ  Dashboard Link
                    â”‚   â”œâ”€â”€ ğŸ² 3D Visualizer Link
                    â”‚   â””â”€â”€ ğŸ“š Collection Link
                    â”‚
                    â””â”€â”€ ğŸ“„ Routes (Page Content)
                        â”œâ”€â”€ ğŸ“Š DashboardPage (/)
                        â”œâ”€â”€ ğŸ² PhysicsVisualizerPage (/visualizer) â† MAIN PAGE
                        â”‚   â””â”€â”€ ğŸ“ PanelGroup (Resizable Panels)
                        â”‚       â”œâ”€â”€ ğŸ“ Left Panel (25% - Scene Selector)
                        â”‚       â”‚   â””â”€â”€ ğŸ¯ SceneSelector Component
                        â”‚       â”‚       â”œâ”€â”€ ğŸ” Extract Scene Button
                        â”‚       â”‚       â”œâ”€â”€ ğŸ“‘ Tab Navigation
                        â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ“– Examples Tab
                        â”‚       â”‚       â”‚   â”œâ”€â”€ ğŸ’¬ Chat History Tab
                        â”‚       â”‚       â”‚   â””â”€â”€ ğŸ‘¤ My Scenes Tab
                        â”‚       â”‚       â”œâ”€â”€ ğŸ“‹ Scene List
                        â”‚       â”‚       â”‚   â””â”€â”€ ğŸ¯ Scene Items
                        â”‚       â”‚       â”‚       â”œâ”€â”€ ğŸ“ Scene Name
                        â”‚       â”‚       â”‚       â”œâ”€â”€ ğŸ‘¤ Author Info
                        â”‚       â”‚       â”‚       â”œâ”€â”€ âš ï¸ Unsaved Badge
                        â”‚       â”‚       â”‚       â””â”€â”€ â‹¯ Three-Dot Menu
                        â”‚       â”‚       â””â”€â”€ ğŸ“ Scene Description
                        â”‚       â”‚
                        â”‚       â”œâ”€â”€ ğŸ”§ Center Panel (50% - 3D Visualizer)
                        â”‚       â”‚   â””â”€â”€ ğŸ¯ Visualizer Component
                        â”‚       â”‚       â”œâ”€â”€ ğŸ® Three.js Canvas
                        â”‚       â”‚       â”œâ”€â”€ ğŸ² Physics Objects
                        â”‚       â”‚       â”œâ”€â”€ ğŸ“Š Real-time Graphs
                        â”‚       â”‚       â””â”€â”€ ğŸ¨ Scene Rendering
                        â”‚       â”‚
                        â”‚       â””â”€â”€ ğŸ’¬ Right Panel (25% - Chat UI)
                        â”‚           â””â”€â”€ ğŸ¯ Conversation Component
                        â”‚               â”œâ”€â”€ ğŸ“‹ Chat Header
                        â”‚               â”‚   â””â”€â”€ ğŸ’¬ "Chat" Title
                        â”‚               â”œâ”€â”€ ğŸ’­ Conversation Box (80%)
                        â”‚               â”‚   â”œâ”€â”€ ğŸ¤– AI Messages
                        â”‚               â”‚   â””â”€â”€ ğŸ‘¤ User Messages
                        â”‚               â””â”€â”€ âŒ¨ï¸ Input Section (20%)
                        â”‚                   â”œâ”€â”€ ğŸ“ Textarea
                        â”‚                   â””â”€â”€ ğŸ“¤ Send Button
                        â”‚
                        â””â”€â”€ ğŸ“š CollectionPage (/collection)
```

## ğŸ¯ Architecture Benefits

### âœ… **Feature Isolation**
- Each feature (`visualizer`, `chat`, `collection`) is self-contained
- Independent development and testing
- Clear separation of concerns

### âœ… **Scalable Structure**
- Easy to add new features without affecting others
- Modular design supports team collaboration
- Future-proof for expansion

### âœ… **Maintainable Code**
- Related files grouped together
- Clear import paths and dependencies
- Professional folder organization

### âœ… **Reusable Components**
- Shared UI components in `shared/ui/`
- Consistent design patterns
- Reduced code duplication

## ğŸš€ Development Workflow

1. **New Feature**: Create folder in `src/features/`
2. **Shared Component**: Add to `src/shared/ui/components/`
3. **Business Logic**: Place in appropriate `src/core/` subfolder
4. **Page**: Add to `src/pages/`
5. **Utility**: Add to `src/utils/`

## ğŸ“‹ File Organization Legend

- ğŸ¯ **Features**: Business domain components
- ğŸ”§ **Core**: Business logic & engines
- ğŸ¨ **Shared**: Reusable UI components
- ğŸ“„ **Pages**: Route-level components
- âš™ï¸ **Contexts**: React state management
- ğŸ› ï¸ **Utils**: Helper functions
- ğŸ“Š **Assets**: Static resources
- ğŸ—‚ï¸ **Backup**: Original files (safe to delete after testing)

---

**Last Updated**: September 2025
**Architecture**: Feature-Based with Shared UI Components
**Status**: âœ… Production Ready
